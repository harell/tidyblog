---
title: Package Management in R via DESCRIPTION
author: Harel Lustiger
date: '2020-03-27'
draft: true
slug: package-management-in-r-via-description
categories:
  - R Projects
  - Reproducible R
tags:
  - dependency management
  - package reproducibility
  - package management
bibliography: [references-posts.bib]
biblio-style: apalike
link-citations: yes  
---


<div id="TOC">
<ul>
<li><a href="#synopsis">Synopsis</a></li>
<li><a href="#package-manager-elements">Package Manager Elements</a></li>
<li><a href="#the-description-file">The DESCRIPTION File</a></li>
<li><a href="#references">References</a></li>
</ul>
</div>

<div id="synopsis" class="section level2">
<h2>Synopsis</h2>
<p><strong>In This Post</strong></p>
<ul>
<li>Using a package manager that capitalises on existing infrastructure.</li>
<li>Forming a discipline of grooming the DESCRIPTION file</li>
<li>Managing R package dependencies in Docker.</li>
</ul>
<p>This post aims to find an efficient solution for managing packages of any
R-based application in conjunction with Docker. The proposed solution turns out
to be efficient even without using Docker. Thus, this post offers an efficient
solution for managing packages of R-based application.</p>
<p>The suggested solution uses an underpinning mechanism that is being used by all
R packages. In short, any R package declares its needs in a file called
DESCRIPTION. DESCRIPTION comprises package metadata organised in fields and
values pairs. In particular, there is one field named “Imports” which lists
packages dependencies: names and (optionally) minimum versions.</p>
<p>The suggested solution adds two optional fields to the DESCRIPTION file: Lib and
Repos. Lib specifies where to install the packages; Repos specifies URL(s) from
which the packages are downloaded from. Importantly, the URL can point to a
snapshot of packages versions which were existed on a specific date.</p>
</div>
<div id="package-manager-elements" class="section level2">
<h2>Package Manager Elements</h2>
<p>The basic and most common method to install R packages is using
<code>install.packages()</code>. Looking at the function help documentation, the first
three input arguments are:</p>
<ol style="list-style-type: decimal">
<li><code>pkgs</code></li>
<li><code>lib</code></li>
<li><code>repos</code></li>
</ol>
<pre><code>install.packages(pkgs, lib, repos = getOption(&quot;repos&quot;),
                 contriburl = contrib.url(repos, type),
                 method, available = NULL, destdir = NULL,
                 dependencies = NA, type = getOption(&quot;pkgType&quot;),
                 configure.args = getOption(&quot;configure.args&quot;),
                 configure.vars = getOption(&quot;configure.vars&quot;),
                 clean = FALSE, Ncpus = getOption(&quot;Ncpus&quot;, 1L),
                 verbose = getOption(&quot;verbose&quot;),
                 libs_only = FALSE, INSTALL_opts, quiet = FALSE,
                 keep_outputs = FALSE, ...)</code></pre>
</div>
<div id="the-description-file" class="section level2">
<h2>The DESCRIPTION File</h2>
<p>Whether you are aware of it or not, your R application uses DESCRIPTION files.
This is because every R package must have one DESCRIPTION file that conforms
with the “Writing R extensions” protocol dictated by the R Core
Team<span class="citation">(Team <a href="#ref-team1999writing" role="doc-biblioref">1999</a>)</span>.</p>
<p>The following is a DESCRIPTION file excerpt of the
<a href="https://github.com/tidyverse/ggplot2/blob/v3.3.0/DESCRIPTION"><code>ggplot2</code></a>
package:</p>
<pre><code>Package: ggplot2
Version: 3.3.0
Title: Create Elegant Data Visualisations Using the Grammar of Graphics
Description: A system for &#39;declaratively&#39; creating graphics,
    based on &quot;The Grammar of Graphics&quot;. You provide the data, tell &#39;ggplot2&#39;
    how to map variables to aesthetics, what graphical primitives to use,
    and it takes care of the details.
Authors@R: person(&quot;Hadley&quot;,&quot;Wickham&quot;, ,&quot;hadley@rstudio.com&quot;,c(&quot;aut&quot;, &quot;cre&quot;))
Imports: 
    digest,
    glue,
    grDevices,
    grid,
    gtable (&gt;= 0.1.1),
    isoband,
    MASS,
    mgcv,
    rlang (&gt;= 0.3.0),
    scales (&gt;= 0.5.0),
    stats,
    tibble,
    withr (&gt;= 2.0.0)</code></pre>
</div>
<div id="references" class="section level2 unnumbered">
<h2>References</h2>
<div id="refs" class="references">
<div id="ref-team1999writing">
<p>Team, R Core. 1999. “Writing R Extensions.” <em>R Foundation for Statistical Computing</em>. <a href="https://cran.r-project.org/doc/manuals/r-release/R-exts.html">https://cran.r-project.org/doc/manuals/r-release/R-exts.html</a>.</p>
</div>
</div>
</div>
